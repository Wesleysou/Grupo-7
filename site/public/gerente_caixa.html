<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OmniView | Gerente</title>
    <link rel="stylesheet" href="./css/defaultstyle.css">
    <link rel="shortcut icon" href="./assets/imgs/logos/omniview-logo.png" type="image/x-icon">
    <link rel="stylesheet" href="./css/indexresponsivo.css">
    <link rel="stylesheet" href="./css/dashboardgerente.css">
    <script src="js/functionDataBase.js"></script>
</head>

<body onload="getMemoriaRamEmUso(), chageTheAlertColor()">

    <header id="header">
        <div class="container">
            <nav class="navbar" id="navBar">
                <img id="logoNavbar" src="./assets/imgs/logos/omniview-logo.png">
                <ul>
                    <li><a href="" class="li-checked">Seus graficos</a></li>
                    <li><a href="sair.html"><button class="botao-entrar">Sair</button></a></li>


                </ul>
            </nav>
        </div>
    </header>

    <div class="lateral-m">
        <nav>
            <div class="nav">
                <input type="checkbox" id="menu_lateral" class="input-menu ">

                <label for="menu_lateral">
                    <div class="menu">

                        <span class="hamburguer"></span>
                    </div>
                </label>

                <label for="menu_lateral" class="botao-fechar">x</label>

                <div class="box-menu">
                    <a href="" class="li-checked">Caixas</a>
                    <a href="gerente_totem.html">Totem</a>
                    <a href="reiniciar_equipamento.html">Equipamentos</a>
                    <a href="sair.html"><button class="botao-entrar">Sair</button></a>
                </div>
            </div>
        </nav>
    </div>
    <br><br><br><br><br><br><br>
    <div class="social">
        <div class="cards">
            <div class="flip" id="card" title="SEM PROBLEMAS">
                <div class="face" id="front">
                    <div class="alinhar_componentes">
                        <h5>TOTEM 1</h5>
                        <button onclick="reiniciarmaq()" class="button_reiniciar">Reiniciar aplicação</button>
                        <div class="alerta" id="totem"><span id="numberr"></span></div>
                    </div>
                </div>
            </div>
            <div class="flip" id="card2" title="PERIGO">
                <div class="face" id="front2">
                    <div class="alinhar_componentes">
                        <h5>TOTEM 2</h5>
                        <button onclick="reiniciarmaq()" class="button_reiniciar">Reiniciar aplicação</button>
                        <div class="alerta" id="totem2"><span id="numberr2">2</span></div>
                    </div>
                </div>
            </div>
            <div class="flip" id="card3" title="SEM PROBLEMAS">
                <div class="face" id="front3">
                    <div class="alinhar_componentes">
                        <h5>TOTEM 3</h5>
                        <button onclick="reiniciarmaq()" class="button_reiniciar">Reiniciar aplicação</button>
                        <div class="alerta" id="totem3"><span id="numberr3">3</span></div>
                    </div>
                </div>
            </div>
            <div class="flip" id="card4" title="SEM PROBLEMAS">
                <div class="face" id="front4">
                    <div class="alinhar_componentes">
                        <h5>TOTEM 4</h5>
                        <button onclick="reiniciarmaq()" class="button_reiniciar">Reiniciar aplicação</button>
                        <div class="alerta" id="totem4"><span id="numberr4"></span></div>
                    </div>
                </div>
            </div>
            <div class="flip" id="card5" title="CUIDADO">
                <div class="face" id="front5">
                    <div class="alinhar_componentes">
                        <h5>TOTEM 5</h5>
                        <button onclick="reiniciarmaq()" class="button_reiniciar">Reiniciar aplicação</button>
                        <div class="alerta" id="totem5"><span id="numberr5"></span></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="social_dash">
            <div class="div_dash">
                <h2>Horário de funcionamento dos caixas</h2>
                <canvas id="myChart" style="height: 90%;width: 100%;"></canvas>
            </div>
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        </div>
    </div>


    <!-- <footer>
            <div class="footer-info">
                <div class="container">
                    <div class="align-links-footer">
                        <a href=""><img src="./assets/imgs/logos/logo-fbc.webp"></a>
                        <a href=""><img src="./assets/imgs/logos/logo-insta.webp"></a>
                        <a href=""><img src="./assets/imgs/logos/logo-linkd.webp"></a>
    
    
                    </div>
                </div>
            </div>
    
            <div class="footer-copyright">
                <div class="container">
                    <p>© 2022 by OmniView todos direitos reservados.</p>
                </div>
            </div>
        </footer> -->





</body>

</html>
<script>

function getram(){

    var ramTotal = sessionStorage.RAMTOTAL;
    var ramTotalTot2 = sessionStorage.RAMTOTALTOT2;
    var ramTotalTot3 = sessionStorage.RAMTOTALTOT3;
    var ramTotalTot4 = sessionStorage.RAMTOTALTOT4;
    var ramTotalTot5 = sessionStorage.RAMTOTALTOT5;

    var ramMaquina = sessionStorage.RAMEMUSO;
    numberr.innerHTML = ramMaquina;

    var ramMaquina2 = sessionStorage.RAMEMUSOTOT2;
    numberr2.innerHTML = ramMaquina2;

    var ramMaquina3 = sessionStorage.RAMEMUSOTOT3;
    numberr3.innerHTML = ramMaquina3;

    var ramMaquina4 = sessionStorage.RAMEMUSOTOT4;
    numberr4.innerHTML = ramMaquina4;

    var ramMaquina5 = sessionStorage.RAMEMUSOTOT5;
    numberr5.innerHTML = ramMaquina5;

        var valorCheio = ramTotal;
        var valorUsado = ramMaquina;
        var calculoPorcentagem = ((valorUsado * 100)/valorCheio).toFixed(0);

    console.log("AQUIII TOTEM 2:" + ramTotalTot2)
    console.log("AQUIII TOTEM 3:" + ramTotalTot3)
    console.log("AQUIII TOTEM 4:" + ramTotalTot4)
    console.log("AQUIII TOTEM 5:" + ramTotalTot5)

        var valorCheio = ramTotalTot2;
        var valorUsado = ramMaquina2;
        var calculoPorcentagem2 = ((valorUsado * 100)/valorCheio).toFixed(0);

        var valorCheio = ramTotalTot3;
        var valorUsado = ramMaquina3;
        var calculoPorcentagem3 = ((valorUsado * 100)/valorCheio).toFixed(0);

        var valorCheio = ramTotalTot4;
        var valorUsado = ramMaquina4;
        var calculoPorcentagem4 = ((valorUsado * 100)/valorCheio).toFixed(0);

        var valorCheio = ramTotalTot5;
        var valorUsado = ramMaquina5;
        var calculoPorcentagem5 = ((valorUsado * 100)/valorCheio).toFixed(0);



        // ================ Muda a dor do totem 1 ==============
         if (calculoPorcentagem <= 70) {
             totem.style.backgroundColor = 'green';
        }

         else if (calculoPorcentagem <= 80) {
             totem.style.backgroundColor = 'yellow';

        }

        else if (calculoPorcentagem <= 90) {
             totem.style.backgroundColor = 'orange';

        }

        else{
             totem.style.backgroundColor = 'red';
        }

        // ===================== Muda a acor maquina 2 ============ 

         if (calculoPorcentagem2 <= 70) {
             totem2.style.backgroundColor = 'green';
        }

         else if (calculoPorcentagem2 <= 80) {
             totem2.style.backgroundColor = 'yellow';

        }

        else if (calculoPorcentagem2 <= 90) {

             totem2.style.backgroundColor = 'orange';
        }

        else{
             totem2.style.backgroundColor = 'red';
        }

        // ======================= alete totem 3============= 

         if (calculoPorcentagem3 <= 70) {
             totem3.style.backgroundColor = 'green';
        }

         else if (calculoPorcentagem3 <= 80) {
             totem3.style.backgroundColor = 'yellow';

        }

        else if (calculoPorcentagem3 <= 90) {

             totem3.style.backgroundColor = 'orange';
        }

        else{
             totem3.style.backgroundColor = 'red';
        }
        // ======================= alete totem 4============= 

         if (calculoPorcentagem4 <= 70) {
             totem4.style.backgroundColor = 'green';
        }

         else if (calculoPorcentagem4 <= 80) {
             totem4.style.backgroundColor = 'yellow';

        }

        else if (calculoPorcentagem4 <= 90) {

             totem4.style.backgroundColor = 'orange';
        }

        else{
             totem4.style.backgroundColor = 'red';
        }

        // // ======================= alete totem 5============= 

         if (calculoPorcentagem5 <= 70) {
             totem5.style.backgroundColor = 'green';
        }

         else if (calculoPorcentagem5 <= 80) {
             totem5.style.backgroundColor = 'yellow';

        }

        else if (calculoPorcentagem5 <= 90) {

             totem5.style.backgroundColor = 'orange';
        }

        else{
             totem5.style.backgroundColor = 'red';
        }
}



    // var alerta;

    // function chageTheAlertColor() {

    //     var numero = sessionStorage.RAMTOTAL;
    //     var valorCheio = Number(numero);
    //     var valorUsado = Number(ramMaquina);
    //     var calculo = Number((valorUsado * 100)/valorCheio);

    //     console.log("RAM AQUIIII" + calculo);

    //     if (sessionStorage.RAMEMUSO > 6) {
    //         totem.style.backgroundColor = 'red';
    //     }

    // }

setInterval(() =>{
    getram();
    //chageTheAlertColor();
}, 8000)

    const labels = [
        'Segunda',
        'Terça',
        'Quarta',
        'Quinta',
        'Sexta',
        'Sábado',
        'Domingo',
    ];

    const data = {
        labels: labels,
        datasets: [{
            label: 'Caixa 1',
            backgroundColor: '#6A5ACD',
            borderColor: '#6A5ACD',
            data: [10, 8, 8, 6, 4, 8, 11],
        },
        {
            label: 'Caixa 2',
            backgroundColor: '#00008B',
            borderColor: '#00008B',
            data: [10, 0, 10, 7, 11, 12, 9],
        },
        {
            label: 'Caixa 3',
            backgroundColor: '#4169E1',
            borderColor: '#4169E1',
            data: [9, 8, 9, 9, 11, 10, 9],
        },
        {
            label: 'Caixa 4',
            backgroundColor: '#00BFFF',
            borderColor: '#00BFFF',
            data: [10, 8, 10, 9, 11, 10, 9],
        }]
    }

    const config = {
        type: 'line',
        data: data,
        options: {}
    };
</script>
<script>
    const myChart = new Chart(
        document.getElementById('myChart'),
        config
    );


    function reiniciarmaq() {

fetch("/usuarios/reiniciarmaq", {
  method: "POST",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    reiniciarMaqServer: 1,


  })
}).then(function (resposta) {

  console.log("resposta: ", resposta);

  if (resposta.ok) {
    window.alert("maquina reiniciada com sucesso");
    limparFormulario();

  } else {
    throw ("Houve um erro ao tentar realizar o cadastro!");
  }
}).catch(function (resposta) {
  console.log(`#ERRO: ${resposta}`);

});


}


</script>